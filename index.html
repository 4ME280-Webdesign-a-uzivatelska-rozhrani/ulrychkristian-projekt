<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <title>Cestovatelsk√Ω den√≠k (reload verze)</title>
  <style>
    body { font-family:sans-serif; max-width:800px; margin:40px auto; padding:20px; background:#f9f9f9; }
    h1,h2 { text-align:center; }
    form, .misto { background:#fff; padding:20px; margin-bottom:20px; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.1); }
    label { display:block; margin-bottom:10px; }
    input, textarea { width:100%; padding:8px; margin-top:4px; box-sizing:border-box; }
    .sekce { margin-top:30px; }
    .misto img { max-width:100%; display:block; margin:10px 0; border-radius:4px; }
    button { background:#007acc; color:#fff; border:none; padding:8px 16px; border-radius:4px; cursor:pointer; }
    button:hover { background:#005fa3; }
  </style>
</head>
<body>

  <h1>üß≠ M≈Øj cestovatelsk√Ω den√≠k</h1>

  <form id="form">
    <h2>‚ûï P≈ôidat nov√© m√≠sto</h2>
    <label>N√°zev m√≠sta:<input type="text" id="misto" required></label>
    <label>Datum n√°v≈°tƒõvy:<input type="date" id="datum" required></label>
    <label>Popis:<textarea id="popis" rows="3" required></textarea></label>
    <label>URL obr√°zku:<input type="text" id="obrazek" placeholder="https://picsum.photos/300/200" required></label>
    <label><input type="checkbox" id="navstiveno"> U≈æ jsem tu byl/a</label>
    <button type="submit">P≈ôidat m√≠sto</button>
  </form>

  <div class="sekce">
    <h2>üïì Chci nav≈°t√≠vit</h2>
    <div id="nenavstiveno"></div>
  </div>
  <div class="sekce">
    <h2>‚úÖ Nav≈°t√≠veno</h2>
    <div id="navstiveno"></div>
  </div>

  <script>
    // Naƒçteme data nebo zaƒçneme pr√°zdn√Ωm polem
    let mista = JSON.parse(localStorage.getItem('mista') || '[]');

    // Vykresl√≠me obƒõ sekce
    function render() {
      const nen = document.getElementById('nenavstiveno');
      const nav = document.getElementById('navstiveno');
      nen.innerHTML = '';
      nav.innerHTML = '';

      mista.forEach((item, i) => {
        const div = document.createElement('div');
        div.className = 'misto';
        div.innerHTML = `
          <h3>${item.misto}</h3>
          <img src="${item.obrazek}" alt="${item.misto}">
          <p><strong>Datum:</strong> ${item.datum}</p>
          <p>${item.popis}</p>
        `;
        const btn = document.createElement('button');
        btn.textContent = item.navstiveno 
          ? 'Znovu na seznam' 
          : 'U≈æ jsem tu byl/a';
        btn.onclick = () => {
          // p≈ôepneme stav, ulo≈æ√≠me a reload
          mista[i].navstiveno = !mista[i].navstiveno;
          localStorage.setItem('mista', JSON.stringify(mista));
          location.reload();
        };
        div.appendChild(btn);

        if (item.navstiveno) {
          nav.appendChild(div);
        } else {
          nen.appendChild(div);
        }
      });
    }

    // Obsluha formul√°≈ôe pro p≈ôid√°n√≠ nov√©ho m√≠sta
    document.getElementById('form').addEventListener('submit', e => {
      e.preventDefault();
      mista.push({
        misto: document.getElementById('misto').value.trim(),
        datum: document.getElementById('datum').value,
        popis: document.getElementById('popis').value.trim(),
        obrazek: document.getElementById('obrazek').value.trim(),
        navstiveno: document.getElementById('navstiveno').checked
      });
      localStorage.setItem('mista', JSON.stringify(mista));
      // reload, aby se nov√© m√≠sto objevilo ve spr√°vn√© sekci
      location.reload();
    });

    // Koneƒçn√© vykreslen√≠
    render();
  </script>
</body>
</html>
