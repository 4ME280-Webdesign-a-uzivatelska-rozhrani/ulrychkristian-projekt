
<!DOCTYPE html>
<html lang="cs">
<head>
Â  <meta charset="UTF-8" />
Â  <title>CestovatelskÃ½ denÃ­k</title>
Â  <style>
Â Â Â  body {
Â Â Â Â Â  font-family: sans-serif;
Â Â Â Â Â  max-width: 900px;
Â Â Â Â Â  margin: 40px auto;
Â Â Â Â Â  padding: 20px;
Â Â Â Â Â  background: #f9f9f9;
Â Â Â  }
Â Â Â  h1, h2 { text-align: center; }
Â Â Â  form, .misto {
Â Â Â Â Â  background: #fff;
Â Â Â Â Â  padding: 20px;
Â Â Â Â Â  border-radius: 8px;
Â Â Â Â Â  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
Â Â Â Â Â  margin-bottom: 20px;
Â Â Â  }
Â Â Â  label { display: block; margin-bottom: 10px; }
Â Â Â  input[type="text"], input[type="date"], textarea {
Â Â Â Â Â  width: 100%; padding: 6px; box-sizing: border-box;
Â Â Â  }
Â Â Â  .sekce { margin-top: 30px; }
Â Â Â  .misto img {
Â Â Â Â Â  max-width: 100%; border-radius: 4px; display: block; margin: 10px 0;
Â Â Â  }
Â Â Â  button {
Â Â Â Â Â  background: #007acc; color: #fff;
Â Â Â Â Â  border: none; padding: 8px 16px; border-radius: 4px;
Â Â Â Â Â  cursor: pointer;
Â Â Â  }
Â Â Â  button:hover { background: #005fa3; }
Â  </style>
</head>
<body>

Â  <h1>ðŸ§­ CestovatelskÃ½ denÃ­k</h1>

Â  <form id="formular">
Â Â Â  <h2>âž• PÅ™idat novÃ© mÃ­sto</h2>
Â Â Â  <label>NÃ¡zev mÃ­sta:
Â Â Â Â Â  <input type="text" id="misto" required>
Â Â Â  </label>
Â Â Â  <label>Datum nÃ¡vÅ¡tÄ›vy:
Â Â Â Â Â  <input type="date" id="datum" required>
Â Â Â  </label>
Â Â Â  <label>Popis:
Â Â Â Â Â  <textarea id="popis" rows="3" required></textarea>
Â Â Â  </label>
Â Â Â  <label>URL obrÃ¡zku:
Â Â Â Â Â  <input type="text" id="obrazek" placeholder="https://picsum.photos/300/200" required>
Â Â Â  </label>
Â Â Â  <label>
Â Â Â Â Â  <input type="checkbox" id="navstiveno">
Â Â Â Â Â  UÅ¾ jsem tu byl/a
Â Â Â  </label>
Â Â Â  <button type="submit">PÅ™idat</button>
Â  </form>

Â  <div class="sekce">
Â Â Â  <h2>ðŸ•“ Chci navÅ¡tÃ­vit</h2>
Â Â Â  <div id="nenavstiveno"></div>
Â  </div>

Â  <div class="sekce">
Â Â Â  <h2>âœ… NavÅ¡tÃ­veno</h2>
Â Â Â  <div id="navstiveno"></div>
Â  </div>

Â  <script>
Â Â Â  const binIdÂ  = "6836d0118a456b7966a65a07";
Â Â Â  const apiKey = "$2a$10$6.w3P.QfhbFQnbnWjZrsg.wsBOO9azO3iyMntL.YxupxTXtjFchvy";
Â Â Â  let mista = [];

Â Â Â  async function loadData() {
Â Â Â Â Â  try {
Â Â Â Â Â Â Â  const resÂ  = await fetch(`https://api.jsonbin.io/v3/b/${binId}/latest`, {
Â Â Â Â Â Â Â Â Â  headers: { "X-Master-Key": apiKey }
Â Â Â Â Â Â Â  });
Â Â Â Â Â Â Â  if (!res.ok) throw new Error(res.status);
Â Â Â Â Â Â Â  const json = await res.json();
Â Â Â Â Â Â Â  mista = json.record.map(item => ({
Â Â Â Â Â Â Â Â Â  ...item,
Â Â Â Â Â Â Â Â Â  navstiveno: item.navstiveno === true || item.navstiveno === "true"
Â Â Â Â Â Â Â  }));
Â Â Â Â Â Â Â  render();
Â Â Â Â Â  } catch (e) {
Â Â Â Â Â Â Â  console.error("Load error:", e);
Â Â Â Â Â Â Â  alert("Chyba pÅ™i naÄÃ­tÃ¡nÃ­ dat.");
Â Â Â Â Â  }
Â Â Â  }

Â Â Â  function render() {
Â Â Â Â Â  const nen = document.getElementById("nenavstiveno");
Â Â Â Â Â  const nav = document.getElementById("navstiveno");
Â Â Â Â Â  nen.innerHTML = "";
Â Â Â Â Â  nav.innerHTML = "";

Â Â Â Â Â  mista.forEach(item => {
Â Â Â Â Â Â Â  const div = document.createElement("div");
Â Â Â Â Â Â Â  div.className = "misto";
Â Â Â Â Â Â Â  div.innerHTML = `
Â Â Â Â Â Â Â Â Â  <h3>${item.misto}</h3>
Â Â Â Â Â Â Â Â Â  <img src="${item.obrazek}" alt="${item.misto}">
Â Â Â Â Â Â Â Â Â  <p><strong>Datum:</strong> ${item.datum}</p>
Â Â Â Â Â Â Â Â Â  <p>${item.popis}</p>
Â Â Â Â Â Â Â  `;
Â Â Â Â Â Â Â  const btn = document.createElement("button");
Â Â Â Â Â Â Â  btn.textContent = item.navstiveno
Â Â Â Â Â Â Â Â Â  ? "Znovu na seznam"
Â Â Â Â Â Â Â Â Â  : "UÅ¾ jsem tu byl/a";
Â Â Â Â Â Â Â  btn.addEventListener("click", () => toggleVisited(item.id));
Â Â Â Â Â Â Â  div.appendChild(btn);

Â Â Â Â Â Â Â  if (item.navstiveno) nav.appendChild(div);
Â Â Â Â Â Â Â  elseÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â  nen.appendChild(div);
Â Â Â Â Â  });
Â Â Â  }

Â Â Â  async function saveData() {
Â Â Â Â Â  try {
Â Â Â Â Â Â Â  const res = await fetch(`https://api.jsonbin.io/v3/b/${binId}`, {
Â Â Â Â Â Â Â Â Â  method: "PUT",
Â Â Â Â Â Â Â Â Â  headers: {
Â Â Â Â Â Â Â Â Â Â Â  "Content-Type": "application/json",
Â Â Â Â Â Â Â Â Â Â Â  "X-Master-Key": apiKey
Â Â Â Â Â Â Â Â Â  },
Â Â Â Â Â Â Â Â Â  body: JSON.stringify(mista)
Â Â Â Â Â Â Â  });
Â Â Â Â Â Â Â  if (!res.ok) throw new Error(res.status);
Â Â Â Â Â  } catch (e) {
Â Â Â Â Â Â Â  console.error("Save error:", e);
Â Â Â Â Â Â Â  alert("Chyba pÅ™i uklÃ¡dÃ¡nÃ­.");
Â Â Â Â Â  }
Â Â Â  }

Â Â Â  async function toggleVisited(id) {
Â Â Â Â Â  const index = mista.findIndex(item => item.id === id);
Â Â Â Â Â  if (index === -1) return;
Â Â Â Â Â  mista[index].navstiveno = !mista[index].navstiveno;
Â Â Â Â Â  await saveData();
Â Â Â Â Â  render();
Â Â Â  }

Â Â Â  document.getElementById("formular")
Â Â Â Â Â  .addEventListener("submit", async function(e) {
Â Â Â Â Â Â Â  e.preventDefault();
Â Â Â Â Â Â Â  const newPlace = {
Â Â Â Â Â Â Â Â Â  id: Date.now(), // unikÃ¡tnÃ­ ID
Â Â Â Â Â Â Â Â Â  misto:Â Â Â Â Â  this.misto.value.trim(),
Â Â Â Â Â Â Â Â Â  datum:Â Â Â Â Â  this.datum.value,
Â Â Â Â Â Â Â Â Â  popis:Â Â Â Â Â  this.popis.value.trim(),
Â Â Â Â Â Â Â Â Â  obrazek:Â Â Â  this.obrazek.value.trim(),
Â Â Â Â Â Â Â Â Â  navstiveno: this.navstiveno.checked
Â Â Â Â Â Â Â  };
Â Â Â Â Â Â Â  mista.push(newPlace);
Â Â Â Â Â Â Â  await saveData();
Â Â Â Â Â Â Â  this.reset();
Â Â Â Â Â Â Â  render();
Â Â Â Â Â  });

Â Â Â  loadData();
Â  </script>
</body>
</html>
